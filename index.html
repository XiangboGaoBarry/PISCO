<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PISCO</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <link rel="stylesheet" href="./static/css/video-comparison.css">
  <!-- <link rel="icon" href="./static/images/icon.png"> -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

  <!-- JS -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


</head>






<body>
  <div id="section-placeholder"></div>

  <script src="static/js/index.js"></script>
  <script src="static/js/video-comparison.js"></script>

  <script>
    window.addEventListener('scroll', function () {
      const iv = document.querySelector('.initial-view');
      if (window.scrollY > 10) {
        iv.style.height = '100vh'; // 展开到全图
      }
    });

    // Cover video click functionality
    function openCoverVideo() {
      openVideoModal('./static/videos/drone.mp4');
    }

    // Copy citation to clipboard
    function copyToClipboard() {
      const citationText = document.getElementById('citation-text').textContent;
      const copyButton = document.querySelector('.copy-button span');

      navigator.clipboard.writeText(citationText).then(function () {
        // Success feedback
        const originalText = copyButton.textContent;
        copyButton.textContent = 'Copied!';
        copyButton.style.color = '#4CAF50';

        setTimeout(function () {
          copyButton.textContent = originalText;
          copyButton.style.color = '';
        }, 2000);
      }).catch(function (err) {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = citationText;
        textArea.style.position = 'fixed';
        textArea.style.left = '-999999px';
        textArea.style.top = '-999999px';
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();

        try {
          document.execCommand('copy');
          copyButton.textContent = 'Copied!';
          copyButton.style.color = '#4CAF50';

          setTimeout(function () {
            copyButton.textContent = 'Copy';
            copyButton.style.color = '';
          }, 2000);
        } catch (err) {
          console.error('Failed to copy text: ', err);
        }

        document.body.removeChild(textArea);
      });
    }

    // Video modal function (using same function as the demo videos)
    function openVideoModal(videoSrc) {
      // Create modal
      const modal = document.createElement('div');
      modal.className = 'modal is-active video-modal';
      modal.innerHTML = `
      <div class="modal-background"></div>
      <div class="modal-content">
        <div class="video-wrapper">
          <video controls autoplay preload="metadata" playsinline>
            <source src="${videoSrc}" type="video/mp4">
            <p>Your browser does not support the video tag. <a href="${videoSrc}" target="_blank">Download the video</a> to view it.</p>
          </video>
        </div>
      </div>
      <button class="modal-close is-large" aria-label="close"></button>
    `;

      // Add to page
      document.body.appendChild(modal);

      // Add close events
      const closeButton = modal.querySelector('.modal-close');
      const modalBackground = modal.querySelector('.modal-background');

      function closeModal() {
        const video = modal.querySelector('video');
        if (video) {
          video.pause();
        }
        document.body.removeChild(modal);
      }

      closeButton.addEventListener('click', closeModal);
      modalBackground.addEventListener('click', closeModal);

      // ESC key close
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape' && document.body.contains(modal)) {
          closeModal();
        }
      });
    }
  </script>


</body>

</html>